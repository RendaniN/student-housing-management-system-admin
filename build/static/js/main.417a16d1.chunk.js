(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,t,a){e.exports=a(362)},191:function(e,t,a){},195:function(e,t,a){},362:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),c=a.n(r),o=(a(191),a(52)),i=a.n(o),s=a(95),u=a(68),m=a(69),d=a(74),p=a(70),h=a(75),f=(a(195),a(372)),E=a(370),v=a(375),g=a(371),C=a(374),y=a(373),b=a(45),w=a.n(b),S=a(51),k=a.n(S),A={url:"https://student-housing-backend-wadahesam.c9users.io/api"},I=a(369),O=a(36),M=(a(115),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={replay:null},a.closeComplaint=function(){w.a.post("".concat(A.url,"/closeComplaint"),k.a.stringify({complaint_id:a.props.complaint.id})).then(function(e){a.props.fetchStuff(),O.toast.success("Complaint has been closed",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.replayToComplaint=function(){w.a.post("".concat(A.url,"/replayToComplaint"),k.a.stringify({complaint_id:a.props.complaint.id,replay:a.state.replay})).then(function(e){a.props.fetchStuff(),O.toast.success("Reply submitted to the complaint",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.complaint;return l.a.createElement(f.a.Row,{key:t.id,disabled:"closed"===t.status},l.a.createElement(f.a.Cell,null,l.a.createElement("h4",null,t.id)),l.a.createElement(f.a.Cell,null,l.a.createElement("h3",null,t.title)),l.a.createElement(f.a.Cell,null,t.description),l.a.createElement(f.a.Cell,null,t.created_at),l.a.createElement(f.a.Cell,null,t.student.name),l.a.createElement(f.a.Cell,null,t.replay?t.replay:l.a.createElement("div",null,l.a.createElement(g.a,{onSubmit:function(a){e.replayToComplaint(t.id,a)}},l.a.createElement(I.a,{rows:"2",autoHeight:!0,onChange:function(t){e.setState({replay:t.target.value})},style:H.tableTextArea}),l.a.createElement(C.a,{type:"submit",size:"small",fluid:!0},"Replay")))),l.a.createElement(f.a.Cell,null,"open"===t.status?l.a.createElement(C.a,{inverted:!0,size:"large",color:"red",onClick:this.closeComplaint},"Close"):l.a.createElement(C.a,{inverted:!0,size:"large",disabled:!0,color:"red"},"Closed")))}}]),t}(n.Component)),H={tableTextArea:{borderRadius:5,width:"100%"}},P=M,j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={navActiveItem:"home",menuActiveItem:"complaints",studentName:"",studentEmail:"",studentPassword:"",creatingStudentAccount:!1,complaints:[]},a.handleNaveItemClick=function(e,t){var n=t.name;return a.setState({navActiveItem:n})},a.handleMenuItemClick=function(e,t){var n=t.name;return a.setState({menuActiveItem:n})},a.fetchStuff=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat(A.url,"/getAllComplaints"));case 2:t=e.sent,a.setState({complaints:t.data}),console.log(a.state);case 5:case"end":return e.stop()}},e,this)})),a.createStudnet=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,l,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.state.studentName,l=a.state.studentEmail,r=a.state.studentPassword,c=a.state.studentPassword,a.setState({creatingStudentAccount:!0}),w.a.post("".concat(A.url,"/createStudentAccount"),k.a.stringify({name:n,email:l,password:r,password_confirmation:c})).then(function(e){console.log(e.data),a.setState({creatingStudentAccount:!1,studentEmail:"",studentName:"",studentPassword:""}),O.toast.success("New student has been created",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}).catch(function(e){a.setState({creatingStudentAccount:!1}),O.toast.error("".concat(e),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.renderComplaintsMenu=function(){var e=a.state.complaints.map(function(e){return l.a.createElement(P,{complaint:e,key:e.id,fetchStuff:a.fetchStuff})});return l.a.createElement(f.a,{celled:!0,style:B.table,textAlign:"center"},l.a.createElement(f.a.Header,null,l.a.createElement(f.a.Row,null,l.a.createElement(f.a.HeaderCell,null,"ID"),l.a.createElement(f.a.HeaderCell,null,"Title"),l.a.createElement(f.a.HeaderCell,null,"Description"),l.a.createElement(f.a.HeaderCell,null,"Date"),l.a.createElement(f.a.HeaderCell,null,"By"),l.a.createElement(f.a.HeaderCell,null,"Replay"),l.a.createElement(f.a.HeaderCell,null,"Status"))),l.a.createElement(f.a.Body,null,e))},a.renderMaintenanceMenu=function(){return l.a.createElement("div",null,"Mentainance")},a.renderCreateStudentMenu=function(){return l.a.createElement(E.a,{text:!0,textAlign:"left"},l.a.createElement(v.a,null,"Create Student Account"),l.a.createElement(g.a,{onSubmit:a.createStudnet},l.a.createElement(g.a.Field,null,l.a.createElement("label",null,"Name"),l.a.createElement("input",{placeholder:"Name",value:a.state.studentName,onChange:function(e){a.setState({studentName:e.target.value})}})),l.a.createElement(g.a.Field,null,l.a.createElement("label",null,"Email"),l.a.createElement("input",{placeholder:"Email",type:"email",value:a.state.studentEmail,onChange:function(e){a.setState({studentEmail:e.target.value})}})),l.a.createElement(g.a.Field,null,l.a.createElement("label",null,"Password"),l.a.createElement("input",{placeholder:"Password",type:"password",value:a.state.studentPassword,onChange:function(e){a.setState({studentPassword:e.target.value})}})),l.a.createElement(C.a,{loading:a.state.creatingStudentAccount,primary:!0,type:"submit"},"Create Student")))},a.renderBody=function(){switch(a.state.menuActiveItem){case"maintenance requests":return a.renderMaintenanceMenu();case"create student":return a.renderCreateStudentMenu();default:return a.renderComplaintsMenu()}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.fetchStuff()}},{key:"render",value:function(){var e=this.state,t=e.activeItem,a=e.menuActiveItem;return l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement(y.a,{inverted:!0,fixed:"top",size:"large"},l.a.createElement(y.a.Item,{name:"home",active:"home"===t,onClick:this.handleItemClick}),l.a.createElement(y.a.Menu,{position:"right"},l.a.createElement(y.a.Item,null,l.a.createElement(C.a,{color:"green"},"Admin Panel"))))),l.a.createElement("div",{style:B.menu},l.a.createElement(y.a,{pointing:!0},l.a.createElement(y.a.Item,{name:"complaints",active:"complaints"===a,onClick:this.handleMenuItemClick}),l.a.createElement(y.a.Item,{name:"maintenance requests",active:"maintenance requests"===a,onClick:this.handleMenuItemClick}),l.a.createElement(y.a.Item,{name:"create student",active:"create student"===a,onClick:this.handleMenuItemClick}))),l.a.createElement("div",{style:B.menuBody},this.renderBody()),l.a.createElement(O.ToastContainer,null))}}]),t}(n.Component),B={menu:{marginTop:60,padding:20},menuBody:{padding:20,marginTop:-20},tableTextArea:{borderRadius:5,width:"100%"}},x=j;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[186,2,1]]]);
//# sourceMappingURL=main.417a16d1.chunk.js.map