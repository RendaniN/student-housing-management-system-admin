(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,a){e.exports=a(396)},211:function(e,t,a){},215:function(e,t,a){},373:function(e,t){},375:function(e,t){},396:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(44),s=a.n(r),c=(a(211),a(39)),o=a.n(c),i=a(65),u=a(22),m=a(23),d=a(25),p=a(24),h=a(26),f=(a(215),a(408)),E=a(409),g=a(27),C=a.n(g),v={url:"https://student-housing-backend-wadahesam.c9users.io/api"},b=a(404),y=a(410),S=a(406),O=a(36),w=a.n(O),k=a(28),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).createStudnet=function(){var e=Object(i.a)(o.a.mark(function e(t){var n,l,r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.props.state.studentName,l=a.props.state.studentEmail,r=a.props.state.studentPassword,s=a.props.state.studentPassword,a.props.setState({creatingStudentAccount:!0}),C.a.post("".concat(v.url,"/createStudentAccount"),w.a.stringify({name:n,email:l,password:r,password_confirmation:s})).then(function(e){console.log(e.data),a.props.setState({creatingStudentAccount:!1,studentEmail:"",studentName:"",studentPassword:""}),k.toast.success("New student has been created",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}).catch(function(e){a.props.setState({creatingStudentAccount:!1}),k.toast.error("".concat(e),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(b.a,{text:!0,textAlign:"left"},l.a.createElement(y.a,null,"Create Student Account"),l.a.createElement(S.a,{onSubmit:this.createStudnet},l.a.createElement(S.a.Field,null,l.a.createElement("label",null,"Name"),l.a.createElement("input",{placeholder:"Name",value:this.props.state.studentName,onChange:function(t){e.props.setState({studentName:t.target.value})}})),l.a.createElement(S.a.Field,null,l.a.createElement("label",null,"Email"),l.a.createElement("input",{placeholder:"Email",type:"email",value:this.props.state.studentEmail,onChange:function(t){e.props.setState({studentEmail:t.target.value})}})),l.a.createElement(S.a.Field,null,l.a.createElement("label",null,"Password"),l.a.createElement("input",{placeholder:"Password",type:"password",value:this.props.state.studentPassword,onChange:function(t){e.props.setState({studentPassword:t.target.value})}})),l.a.createElement(E.a,{loading:this.props.state.creatingStudentAccount,primary:!0,type:"submit"},"Create Student")))}}]),t}(n.Component),A=a(407),I=a(405),q=(a(101),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={replay:null},a.closeComplaint=function(){C.a.post("".concat(v.url,"/closeComplaint"),w.a.stringify({complaint_id:a.props.complaint.id})).then(function(e){a.props.fetchStuff(),k.toast.success("Complaint has been closed",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.replayToComplaint=function(){C.a.post("".concat(v.url,"/replayToComplaint"),w.a.stringify({complaint_id:a.props.complaint.id,replay:a.state.replay})).then(function(e){a.props.fetchStuff(),k.toast.success("Reply submitted to the complaint",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.complaint;return l.a.createElement(A.a.Row,{key:t.id,disabled:"closed"===t.status},l.a.createElement(A.a.Cell,null,l.a.createElement("h4",null,t.id)),l.a.createElement(A.a.Cell,null,l.a.createElement("h3",null,t.title)),l.a.createElement(A.a.Cell,null,t.description),l.a.createElement(A.a.Cell,null,t.created_at),l.a.createElement(A.a.Cell,null,t.student.name),l.a.createElement(A.a.Cell,null,t.replay?t.replay:l.a.createElement("div",null,l.a.createElement(S.a,{onSubmit:function(a){e.replayToComplaint(t.id,a)}},l.a.createElement(I.a,{rows:"2",autoHeight:!0,onChange:function(t){e.setState({replay:t.target.value})},style:H.tableTextArea}),l.a.createElement(E.a,{type:"submit",size:"small",fluid:!0},"Replay")))),l.a.createElement(A.a.Cell,null,"open"===t.status?l.a.createElement(E.a,{inverted:!0,size:"large",color:"red",onClick:this.closeComplaint},"Close"):l.a.createElement(E.a,{inverted:!0,size:"large",disabled:!0,color:"red"},"Closed")))}}]),t}(n.Component)),H={tableTextArea:{borderRadius:5,width:"100%"}},R=q,B=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.state.complaints.map(function(t){return l.a.createElement(R,{complaint:t,key:t.id,fetchStuff:e.props.fetchStuff})});return l.a.createElement(A.a,{celled:!0,style:P.table,textAlign:"center"},l.a.createElement(A.a.Header,null,l.a.createElement(A.a.Row,null,l.a.createElement(A.a.HeaderCell,null,"ID"),l.a.createElement(A.a.HeaderCell,null,"Title"),l.a.createElement(A.a.HeaderCell,null,"Description"),l.a.createElement(A.a.HeaderCell,null,"Date"),l.a.createElement(A.a.HeaderCell,null,"By"),l.a.createElement(A.a.HeaderCell,null,"Replay"),l.a.createElement(A.a.HeaderCell,null,"Status"))),l.a.createElement(A.a.Body,null,t))}}]),t}(n.Component),P={menu:{marginTop:60,padding:20},menuBody:{padding:20,marginTop:-20},tableTextArea:{borderRadius:5,width:"100%"}},T=B,x=a(176),M=(a(368),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).closeRequest=function(){C.a.post("".concat(v.url,"/closeMaintenanceRequest"),w.a.stringify({request_id:a.props.request.id})).then(function(){a.props.fetchStuff(),k.toast.success("Request has been closed",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.markRequestAsInProcess=function(){C.a.post("".concat(v.url,"/setMaintenanceRequestAsInProcess"),w.a.stringify({request_id:a.props.request.id})).then(function(){a.props.fetchStuff(),k.toast.success("Request is in process",{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})},a.renderStatusButtons=function(){var e=a.props.request;return"open"===e.status?l.a.createElement(E.a.Group,null,l.a.createElement(E.a,{negative:!0,onClick:a.closeRequest},"Close"),l.a.createElement(E.a.Or,{text:"or"}),l.a.createElement(E.a,{onClick:a.markRequestAsInProcess,positive:!0},"In Process")):"in_process"===e.status?l.a.createElement(E.a,{negative:!0,onClick:a.closeRequest},"Close"):l.a.createElement("p",null,"Request is closed.")},a.renderCurrentStatus=function(){var e=a.props.request;return"open"===e.status?l.a.createElement(x.a,{as:"a",color:"green",tag:!0},"Open"):"closed"===e.status?l.a.createElement(x.a,{as:"a",color:"red",tag:!0},"Closed"):l.a.createElement(x.a,{as:"a",color:"blue",tag:!0},"In Process")},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.request;return l.a.createElement(A.a.Row,{key:e.id,disabled:"closed"===e.status},l.a.createElement(A.a.Cell,null,l.a.createElement("h4",null,e.id)),l.a.createElement(A.a.Cell,null,e.type),l.a.createElement(A.a.Cell,null,l.a.createElement("h3",null,e.title)),l.a.createElement(A.a.Cell,null,e.description),l.a.createElement(A.a.Cell,null,e.created_at),l.a.createElement(A.a.Cell,null,e.student.name),l.a.createElement(A.a.Cell,null,this.renderCurrentStatus()),l.a.createElement(A.a.Cell,null,this.renderStatusButtons()))}}]),t}(n.Component)),N=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.state.requests.map(function(t){return l.a.createElement(M,{request:t,key:t.id,fetchStuff:e.props.fetchStuff})});return l.a.createElement(A.a,{celled:!0,style:_.table,textAlign:"center"},l.a.createElement(A.a.Header,null,l.a.createElement(A.a.Row,null,l.a.createElement(A.a.HeaderCell,null,"ID"),l.a.createElement(A.a.HeaderCell,null,"Type"),l.a.createElement(A.a.HeaderCell,null,"Title"),l.a.createElement(A.a.HeaderCell,null,"Description"),l.a.createElement(A.a.HeaderCell,null,"Date"),l.a.createElement(A.a.HeaderCell,null,"By"),l.a.createElement(A.a.HeaderCell,null,"State"),l.a.createElement(A.a.HeaderCell,null,"Change State"))),l.a.createElement(A.a.Body,null,t))}}]),t}(n.Component),_={menu:{marginTop:60,padding:20},menuBody:{padding:20,marginTop:-20},tableTextArea:{borderRadius:5,width:"100%"}},D=N,z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={navActiveItem:"home",menuActiveItem:"complaints",studentName:"",studentEmail:"",studentPassword:"",creatingStudentAccount:!1,complaints:[],requests:[]},a.handleNaveItemClick=function(e,t){var n=t.name;return a.setState({navActiveItem:n})},a.handleMenuItemClick=function(e,t){var n=t.name;return a.setState({menuActiveItem:n})},a.fetchStuff=Object(i.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("".concat(v.url,"/getAllMaintenanceRequests"));case 2:return t=e.sent,e.next=5,C.a.post("".concat(v.url,"/getAllComplaints"));case 5:n=e.sent,a.setState({complaints:n.data,requests:t.data}),console.log(a.state);case 8:case"end":return e.stop()}},e,this)})),a.renderMaintenanceMenu=function(){return l.a.createElement("div",null,"Mentainance")},a.renderBody=function(){switch(a.state.menuActiveItem){case"maintenance requests":return l.a.createElement(D,{state:a.state,setState:function(e){a.setState(e)},fetchStuff:a.fetchStuff});case"create student":return l.a.createElement(j,{state:a.state,setState:function(e){a.setState(e)}});default:return l.a.createElement(T,{state:a.state,setState:function(e){a.setState(e)},fetchStuff:a.fetchStuff})}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchStuff();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.activeItem,a=e.menuActiveItem;return l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement(f.a,{inverted:!0,fixed:"top",size:"large"},l.a.createElement(f.a.Item,{name:"home",active:"home"===t,onClick:this.handleItemClick}),l.a.createElement(f.a.Menu,{position:"right"},l.a.createElement(f.a.Item,null,l.a.createElement(E.a,{color:"green"},"Admin Panel"))))),l.a.createElement("div",{style:F.menu},l.a.createElement(f.a,{pointing:!0},l.a.createElement(f.a.Item,{name:"complaints",active:"complaints"===a,onClick:this.handleMenuItemClick}),l.a.createElement(f.a.Item,{name:"maintenance requests",active:"maintenance requests"===a,onClick:this.handleMenuItemClick}),l.a.createElement(f.a.Item,{name:"create student",active:"create student"===a,onClick:this.handleMenuItemClick}))),l.a.createElement("div",{style:F.menuBody},this.renderBody()),l.a.createElement(k.ToastContainer,null))}}]),t}(n.Component),F={menu:{marginTop:60,padding:20},menuBody:{padding:20,marginTop:-20},tableTextArea:{borderRadius:5,width:"100%"}},W=z;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[206,2,1]]]);
//# sourceMappingURL=main.6ce16bfa.chunk.js.map